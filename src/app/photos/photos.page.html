<ion-header [translucent]="true" >
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <!-- <ion-buttons slot="end" >
      <ion-button (click)="seeNotif($event)">
        <ion-icon slot="icon-only" ios="ellipsis-horizontal" md="ellipsis-vertical" ></ion-icon>
        <ion-badge *ngIf="newItems?.length > 0" color="light">{{newItems?.length}}</ion-badge>
      </ion-button>
    </ion-buttons> -->
    <ion-title>
      <ion-img class="brand_img" src="../../assets/images/acensi_brand_white.png"></ion-img>
      <!-- Actualités -->
    </ion-title>

  </ion-toolbar>
</ion-header>


<ion-content>

  <!-- ----------------------------------------- Visualisation de l'upload en cours ------------------------------------------ -->
  <ion-card text-center *ngIf="photoService.isUploading && !photoService.isUploaded">
    <ion-card-header>
      <ion-card-title
        >Selected File:<b>{{ photoService.fileName }}</b></ion-card-title
      >
    </ion-card-header>
 
    <ion-card-content>
      <div *ngIf="photoService.percentage | async as pct">
        Progress: {{ pct | number }}%
        <ion-progress-bar value="{{ pct / 100 }}"></ion-progress-bar>
      </div>
      <div *ngIf="photoService.snapshot | async as snap">


        
        File Size: {{ snap.totalBytes | fileSizePipe }} Transfered:
        {{ snap.bytesTransferred | fileSizePipe }}
        <div *ngIf="photoService.snapshot && snap.bytesTransferred != snap.totalBytes">
          <ion-button
            color="warning"
            size="small"
            (click)="photoService.task.pause()"
            class="button is-warning"
            >Pause</ion-button
          >
          <ion-button
            size="small"
            (click)="photoService.task.resume()"
            class="button is-info"
            >Resume</ion-button
          >
          <ion-button
            color="danger"
            size="small"
            (click)="photoService.task.cancel()"
            class="button is-danger"
            >Cancel</ion-button
          >
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- ---------------------------------------------------- Tab en haut de page pour changer le type ----------------------- -->
  <ion-segment color="primary" [(ngModel)]="type" (ionChange)="segmentChanged($event)" scrollable>
    <ion-segment-button value="regular" checked>
      <ion-label>Galerie</ion-label>
      <!-- <ion-icon name="cash"></ion-icon> -->
    </ion-segment-button>
    <ion-segment-button value="pinterest">
      <ion-label>Dossiers</ion-label>
      <!-- <ion-icon name="log-out"></ion-icon> -->
    </ion-segment-button>
  </ion-segment>

   <!-- -------------------------------------------- apercu de toutes les images selon le type ---------------------------------------- -->
  <div [ngSwitch]="type">
    <!-- visu regular -->


    <ion-grid *ngSwitchCase="'regular'">
      <ion-row>
        <ion-col size=6 *ngFor="let image of photoService.images | async">
          <div (click)="presentAlert(image.filepath)" class="image-container" [style.background-image]="'url('+ image.filepath +')'"></div>
          <!-- <div (click)="clickonimage(image.filepath)" class="image-container" [style.background-image]="'url('+ image.filepath +')'"></div> -->
        </ion-col>
      </ion-row>
    </ion-grid> 
<!-- 
    <ion-grid *ngSwitchCase="'regular'">
      <ion-row>
        <ion-col size=6 *ngFor="let image of photoService.images | async">
          <div (click)="clickonimage(image.filepath)" class="image-container" [style.background-image]="'url('+ image.filepath +')'"></div>
        </ion-col>
      </ion-row>
    </ion-grid>  -->



    <!-- <div class="images" *ngSwitchCase="'regular'">
      <div class="one-image" *ngFor="let image of photoService.images | async">
        <img [src]="image.filepath">
      </div>
    </div>    -->

    <!-- <ion-grid *ngSwitchCase="'pinterest'">
      <ion-row>
        <ion-col col-6 col-md-4 col-xl-3 *ngFor="let image of photoService.images | async">
          <div class="image-container" [style.background-image]="'url('+ image.filepath +')'"></div>
        </ion-col>
      </ion-row>
    </ion-grid>  -->
    <div *ngSwitchCase="'pinterest'" style="padding-top: 3%;">
      <!-- <ion-label>Tout</ion-label> -->
      <ion-label>Tout</ion-label>
      <div class="oneCat">
        <ion-slides centeredSlides="true" zoom="true" class="image-slider" slidesPerView="1" >
          <ion-slide *ngFor="let img of photoService.images | async" class="image-slider" >
            <!-- <div (click)="clickonimage(img.filepath)">
              <img [src]="img.filepath" class="thumb-img " />
            </div> -->
            <div (click)="presentAlert(img.filepath)">
              <img [src]="img.filepath" class="thumb-img " />
            </div>
          </ion-slide>
        </ion-slides>
      </div>
      

      <!-- Evenement 2
      <ion-slides class="image-slider" loop="true" slidesPerView="2" >
        <ion-slide *ngFor="let img of photoService.images | async">
          <img [src]="img.filepath" class="thumb-img" imageViewer/>
        </ion-slide>
      </ion-slides>

      Evenement 3
      <ion-slides class="image-slider" loop="true" slidesPerView="3" >
        <ion-slide *ngFor="let img of photoService.images | async">
          <img [src]="img.filepath" class="thumb-img" imageViewer/>
        </ion-slide>
      </ion-slides>

      Evenement 4
      <ion-slides class="image-slider" loop="true" slidesPerView="4" >
        <ion-slide *ngFor="let img of photoService.images | async">
          <img [src]="img.filepath" class="thumb-img" imageViewer/>
        </ion-slide>
      </ion-slides> -->
    </div>
    
  
  </div>

 

   <!-- <ion-card color="light" text-center *ngFor="let item of photoService.images | async">
     <ion-card-header>
       <ion-card-title>
         {{ item.name }}
       </ion-card-title>
     </ion-card-header>
  
     <ion-card-content>
       <img [src]="item.filepath" />
       <a [href]="item.filepath" target="_blank" rel="noopener">Download</a>
     </ion-card-content>
   </ion-card> -->

  
   <!-- ------------------------------------------------ Ajout de l'image ----------------------------------------------- -->
   
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button (click)="fileInput.click()" >
        <ion-icon name="camera"></ion-icon>
      </ion-fab-button>
  
      <input hidden
        #fileInput
          id="uploadBtn"
          type="file"
          class="upload"
          (change)="photoService.uploadFile($event.target.files)"
        />
  
    </ion-fab>
   

   <!-- <ion-card text-center *ngIf="!photoService.isUploading && !photoService.isUploaded">
    <ion-card-header>
      <ion-card-title>Choose Images to Upload</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="fileUpload btn btn-primary">
        <input hidden
        #fileInput
          id="uploadBtn"
          type="file"
          class="upload"
          (change)="photoService.uploadFile($event.target.files)"
        />
        <ion-fab-button (click)="fileInput.click()" >
          <ion-icon name="camera"></ion-icon>
        </ion-fab-button>
      </div>
    </ion-card-content>
  </ion-card> -->

  
   

 


  <!-- ------------------------------------------------ Visu de l'image uploadé ------------------------------------------- -->
  <!-- <ion-card text-center *ngIf="!photoService.isUploading && photoService.isUploaded">
    <ion-card-header>
      <ion-card-title>
        <b>{{ photoService.fileName }}</b> Uploaded!
      </ion-card-title>
    </ion-card-header>
 
    <ion-card-content>
      <div *ngIf="photoService.UploadedFileURL | async as url">
        <img [src]="url" />
        <a [href]="url" target="_blank" rel="noopener">Download</a>
      </div>
      File Size: {{ photoService.fileSize | fileSizePipe }}
      <ion-button
        expand="full"
        color="success"
        (click)="photoService.isUploading = photoService.isUploaded = false"
        >Upload More</ion-button
      >
    </ion-card-content>
  </ion-card> -->

 

</ion-content>
